language: go
go: 1.8
install:
  - make setup
  - gem install fpm
script:
  - make test
  - test -n "$TRAVIS_TAG" || go run ./cmd/goreleaser/main.go --skip-validate --skip-publish
after_success:
  - go get github.com/mattn/goveralls
  - goveralls -coverprofile=coverage.out -service=travis-ci -repotoken="$COVERALLS_TOKEN"
  - test -n "$TRAVIS_TAG" && go run ./cmd/goreleaser/main.go
notifications:
  email: false
